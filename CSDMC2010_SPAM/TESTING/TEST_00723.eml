X-Account-Key: account5
X-UIDL: GmailId12879b0bce076aba
X-Mozilla-Status: 0000
X-Mozilla-Status2: 00000000
X-Mozilla-Keys:                                                                                 
Delivered-To: mlsubscriber.tech@csmining.org
Received: by 10.142.81.20 with SMTP id e20cs523208wfb;
        Sat, 8 May 2010 13:52:26 -0700 (PDT)
Received: by 10.223.161.204 with SMTP id s12mr1937804fax.103.1273351945726;
        Sat, 08 May 2010 13:52:25 -0700 (PDT)
Return-Path: <bounce-debian-user=mlsubscriber.tech=csmining.org@lists.debian.org>
Received: from liszt.debian.org (liszt.debian.org [82.195.75.100])
        by mx.google.com with ESMTP id 21si5058117faw.71.2010.05.08.13.52.25;
        Sat, 08 May 2010 13:52:25 -0700 (PDT)
Received-SPF: pass (google.com: manual fallback record for domain of bounce-debian-user=mlsubscriber.tech=csmining.org@lists.debian.org designates 82.195.75.100 as permitted sender) client-ip=82.195.75.100;
Authentication-Results: mx.google.com; spf=pass (google.com: manual fallback record for domain of bounce-debian-user=mlsubscriber.tech=csmining.org@lists.debian.org designates 82.195.75.100 as permitted sender) smtp.mail=bounce-debian-user=mlsubscriber.tech=csmining.org@lists.debian.org
Received: from localhost (localhost [127.0.0.1])
	by liszt.debian.org (Postfix) with QMQP
	id C097813A5234; Sat,  8 May 2010 20:52:20 +0000 (UTC)
Old-Return-Path: <linuxmail@4lin.net>
XChecker-Version: SpamAssassin 3.2.5 (2008-06-10) on liszt.debian.org
XLevel: 
XStatus: No, score=-17.3 required=4.0 tests=ALL_TRUSTED,FOURLA,
	LDOSUBSCRIBER,LDO_WHITELIST,PGPSIGNATURE autolearn=failed version=3.2.5
X-Original-To: lists-debian-user@liszt.debian.org
Delivered-To: lists-debian-user@liszt.debian.org
Received: from localhost (localhost [127.0.0.1])
	by liszt.debian.org (Postfix) with ESMTP id 33FF513A50A6
	for <lists-debian-user@liszt.debian.org>; Sat,  8 May 2010 20:52:17 +0000 (UTC)
X-Virus-Scanned: at lists.debian.org with policy bank en-ht
X-AmavisStatus: No, score=-13.7 tagged_above=-10000 required=5.3
	tests=[ALL_TRUSTED=-1.8, BAYES_00=-2, FOURLA=0.1, LDO_WHITELIST=-5,
	PGPSIGNATURE=-5] autolearn=ham
Received: from liszt.debian.org ([127.0.0.1])
	by localhost (lists.debian.org [127.0.0.1]) (amavisd-new, port 2525)
	with ESMTP id HJfqKhKvv2FZ for <lists-debian-user@liszt.debian.org>;
	Sat,  8 May 2010 20:52:09 +0000 (UTC)
X-Greylist: delayed 436 seconds by postgrey-1.31 at liszt; Sat, 08 May 2010 20:52:09 UTC
Received: from mail.4lin.net (mail.4lin.net [IPv6:2001:470:1f0b:69:216:3eff:fe79:c04c])
	by liszt.debian.org (Postfix) with ESMTP id CF9FF13A5020
	for <debian-user@lists.debian.org>; Sat,  8 May 2010 20:52:09 +0000 (UTC)
Received: from localhost (localhost [127.0.0.1])
	by mail.4lin.net (Postfix) with ESMTP id 2467943F4FC
	for <debian-user@lists.debian.org>; Sat,  8 May 2010 22:45:17 +0200 (CEST)
X-Virus-Scanned: amavisd-new at mail.4lin.net
Received: from mail.4lin.net ([127.0.0.1])
	by localhost (mail.4lin.net [127.0.0.1]) (amavisd-new, port 10026)
	with ESMTP id khlO7PzVwwxL for <debian-user@lists.debian.org>;
	Sat,  8 May 2010 22:45:04 +0200 (CEST)
Received: from [192.168.3.34] (ip-109-90-22-56.unitymediagroup.de [109.90.22.56])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by mail.4lin.net (Postfix) with ESMTPSA id C7D5043F4FB
	for <debian-user@lists.debian.org>; Sat,  8 May 2010 22:45:04 +0200 (CEST)
Subject: NIS: /etc/nsswitch seems (a bit) ignored from /usr/bin/passwd
From: Denny Schierz <linuxmail@4lin.net>
To: debian-user@lists.debian.org
Content-Type: multipart/signed; micalg="pgp-sha1"; protocol="application/pgp-signature"; boundary="=-p8Anmz9VB50PjB5WSKRq"
Date: Sat, 08 May 2010 22:44:40 +0200
Message-ID: <1273351480.11128.104.camel@mac>
Mime-Version: 1.0
X-Mailer: Evolution 2.28.1 
X-Rc-Virus: 2007-09-13_01
X-Rc-Spam: 2008-11-04_01
Resent-Message-ID: <wVbk4KTConE.A.0pH.E8c5LB@liszt>
Resent-From: debian-user@lists.debian.org
X-Mailing-List: <debian-user@lists.debian.org> archive/latest/576239
X-Loop: debian-user@lists.debian.org
List-Id: <debian-user.lists.debian.org>
List-Post: <mailto:debian-user@lists.debian.org>
List-Help: <mailto:debian-user-request@lists.debian.org?subject=help>
List-Subscribe: <mailto:debian-user-request@lists.debian.org?subject=subscribe>
List-Unsubscribe: <mailto:debian-user-request@lists.debian.org?subject=unsubscribe>
Precedence: list
Resent-Sender: debian-user-request@lists.debian.org
Resent-Date: Sat,  8 May 2010 20:52:20 +0000 (UTC)


--=-p8Anmz9VB50PjB5WSKRq
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: quoted-printable

hi,

I have a real strange problem. We have a NIS system with Debian Lenny
clients and LDAP as second system, but LDAP is not the problem here. I
want, that the user have to use the passwd command (cause of cracklib
support via pam). Here some facts on one client:

/etc/nsswitch.conf

passwd: file nis
shadow: files
group: files nis

/etc/passwd

[...]
testck:x:6290:4000:test test:/home/testck:/bin/bash
+:::::::::
[...]

Shadow passes are disabled.

/etc/pam.d/common-password

password   required  pam_unix.so nullok md5 nis debug

I can do:

getent passwd | grep testck

testck:x:6290:4000:test test:/home/testck:/bin/bash
testck:[md5 hash]:6290:4000:test test:/home/testck:/bin/bash

You see, user testck is listed twice. One of /etc/passwd, one from
another location, nis.

So, the main problem is, if the user wants to change the password,
passwd breaks immediately, after asking the Old Password, however, NIS
isn't involved ...=20

If I remove the testck from the local /etc/passwd, getent list only the
nis one (cool), but, "su - testck" doesn't work anymore. the user is
unknown.

I' don't know, why the users are listed in the local /etc/passwd file,
I'm new to the system, but it looks a bit strange to me.

( i tested everything without reboot)

So, the main problem is, that passwd breaks cause of the missing
password in /etc/passwd and passwd doesn't look in the the NIS map,
where the password resides.

any suggestions?

cu denny








--=-p8Anmz9VB50PjB5WSKRq
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: Dies ist ein digital signierter Nachrichtenteil

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.9 (GNU/Linux)

iEYEABECAAYFAkvlzSYACgkQKlzhkqt9P+B7/ACeL4zeIgEFe6EsSTKnq8InVpnF
TJ8An3N127DzIbe3UuzvzPmJqHcI5lY8
=8KbD
-----END PGP SIGNATURE-----

--=-p8Anmz9VB50PjB5WSKRq--


-- 
To UNSUBSCRIBE, email to debian-user-REQUEST@lists.debian.org 
with a subject of "unsubscribe". Trouble? Contact listmaster@lists.debian.org
Archive: http://lists.debian.org/1273351480.11128.104.camel@mac


