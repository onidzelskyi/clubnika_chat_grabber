X-Account-Key: account5
X-UIDL: GmailId128383aa953a3285
X-Mozilla-Status: 0000
X-Mozilla-Status2: 00000000
X-Mozilla-Keys:                                                                                 
Delivered-To: mlsubscriber.tech@csmining.org
Received: by 10.143.34.8 with SMTP id m8cs69034wfj;
        Sun, 25 Apr 2010 20:48:09 -0700 (PDT)
Received: by 10.87.1.2 with SMTP id d2mr734804fgi.34.1272253688149;
        Sun, 25 Apr 2010 20:48:08 -0700 (PDT)
Return-Path: <bounce-debian-user=mlsubscriber.tech=csmining.org@lists.debian.org>
Received: from liszt.debian.org (liszt.debian.org [82.195.75.100])
        by mx.google.com with ESMTP id e17si1608658fke.57.2010.04.25.20.48.07;
        Sun, 25 Apr 2010 20:48:08 -0700 (PDT)
Received-SPF: pass (google.com: manual fallback record for domain of bounce-debian-user=mlsubscriber.tech=csmining.org@lists.debian.org designates 82.195.75.100 as permitted sender) client-ip=82.195.75.100;
Authentication-Results: mx.google.com; spf=pass (google.com: manual fallback record for domain of bounce-debian-user=mlsubscriber.tech=csmining.org@lists.debian.org designates 82.195.75.100 as permitted sender) smtp.mail=bounce-debian-user=mlsubscriber.tech=csmining.org@lists.debian.org
Received: from localhost (localhost [127.0.0.1])
	by liszt.debian.org (Postfix) with QMQP
	id B0B7813A499A; Mon, 26 Apr 2010 03:48:01 +0000 (UTC)
Old-Return-Path: <pecondon@mesanetworks.net>
XChecker-Version: SpamAssassin 3.2.5 (2008-06-10) on liszt.debian.org
XLevel: 
XStatus: No, score=-9.8 required=4.0 tests=FOURLA,IMPRONONCABLE_2,
	LDOSUBSCRIBER,LDO_WHITELIST,MURPHY_SEX_L2 autolearn=failed version=3.2.5
X-Original-To: lists-debian-user@liszt.debian.org
Delivered-To: lists-debian-user@liszt.debian.org
Received: from localhost (localhost [127.0.0.1])
	by liszt.debian.org (Postfix) with ESMTP id 5166F13A4990
	for <lists-debian-user@liszt.debian.org>; Mon, 26 Apr 2010 03:47:55 +0000 (UTC)
X-Virus-Scanned: at lists.debian.org with policy bank en-ht
X-AmavisStatus: No, score=-5.8 tagged_above=-10000 required=5.3
	tests=[BAYES_00=-2, FOURLA=0.1, IMPRONONCABLE_2=1, LDO_WHITELIST=-5,
	MURPHY_SEX_L2=0.1] autolearn=no
Received: from liszt.debian.org ([127.0.0.1])
	by localhost (lists.debian.org [127.0.0.1]) (amavisd-new, port 2525)
	with ESMTP id MpXPQab6aVSB for <lists-debian-user@liszt.debian.org>;
	Mon, 26 Apr 2010 03:47:48 +0000 (UTC)
X-policyd-weight:  DYN_NJABL=SKIP(0) NOT_IN_SBL_XBL_SPAMHAUS=-1.5 NOT_IN_BL_NJABL=-1.5 DSBL_ORG=SKIP(0) HELO_IP_IN_CL_SUBNET=-1.2 (check from: .mesanetworks. - helo: .omta0109.mta.everyone. - helo-domain: .everyone.)  FROM/MX_MATCHES_HELO(DOMAIN)=-2 IN_PM_RFCI=0.1; rate: -6.1
Received: from omta0109.mta.everyone.net (imta-38.everyone.net [216.200.145.38])
	by liszt.debian.org (Postfix) with ESMTP id 9574A13A497B
	for <debian-user@lists.debian.org>; Mon, 26 Apr 2010 03:47:45 +0000 (UTC)
Received: from dm0201.mta.everyone.net (sj1-slb03-gw2 [172.16.1.96])
	by omta0109.mta.everyone.net (Postfix) with ESMTP id A720467661
	for <debian-user@lists.debian.org>; Sun, 25 Apr 2010 20:47:42 -0700 (PDT)
X-Eon-Dm: dm0201
Received: by dm0201.mta.everyone.net (EON-AUTHRELAY2 - 4813b144) id dm0201.4bd13813.6140f3
	for <debian-user@lists.debian.org>; Sun, 25 Apr 2010 20:47:40 -0700
X-Eon-Sig: AQMnnbRL1QzcMkI1tAIAAAAB,1dae511468f3a10de9313744f737047c
Received: from pec by big.lan.gnu with local (Exim 4.71)
	(envelope-from <pecondon@mesanetworks.net>)
	id 1O6FIJ-0001ZF-GL
	for debian-user@lists.debian.org; Sun, 25 Apr 2010 21:47:39 -0600
Date: Sun, 25 Apr 2010 21:47:39 -0600
From: Paul E Condon <pecondon@mesanetworks.net>
To: debian-user@lists.debian.org
Subject: Re: 32000 directories (somewhat OT)
Message-ID: <20100426034739.GB3490@big.lan.gnu>
Mail-Followup-To: debian-user@lists.debian.org
References: <t2lb713df2c1004230626nf03ce27bu8d967978af7d90c8@mail.csmining.org>
 <z2rb713df2c1004232113y89ae7d9avcc97a4382e36438b@mail.csmining.org>
 <v2ib713df2c1004250804ga202e09cx75384535a15dde8f@mail.csmining.org>
 <4BD45EED.20907@cox.net>
 <87633f8h0l.fsf@thumper.dhh.gt.org>
 <4BD49E55.5090000@cox.net>
 <87wrvv6xl0.fsf@thumper.dhh.gt.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <87wrvv6xl0.fsf@thumper.dhh.gt.org>
User-Agent: Mutt/1.5.20 (2009-06-14)
X-Rc-Virus: 2007-09-13_01
X-Rc-Spam: 2008-11-04_01
Resent-Message-ID: <ASUuoZ5OkcJ.A.gmC.xzQ1LB@liszt>
Resent-From: debian-user@lists.debian.org
X-Mailing-List: <debian-user@lists.debian.org> archive/latest/575059
X-Loop: debian-user@lists.debian.org
List-Id: <debian-user.lists.debian.org>
List-Post: <mailto:debian-user@lists.debian.org>
List-Help: <mailto:debian-user-request@lists.debian.org?subject=help>
List-Subscribe: <mailto:debian-user-request@lists.debian.org?subject=subscribe>
List-Unsubscribe: <mailto:debian-user-request@lists.debian.org?subject=unsubscribe>
Precedence: list
Resent-Sender: debian-user-request@lists.debian.org
Resent-Date: Mon, 26 Apr 2010 03:48:01 +0000 (UTC)

On 20100425_161747, John Hasler wrote:
> Ron Johnson writes:
> > You all should (with some research and planning) be able to reorganize
> > that sprawling flat structure into a significantly nested structure.
> 
> I wrote:
> > Unless it is hard-coded into a closed-source program.
> 
> Ron Johnson writes:
> > That scenario can (probably) be worked around with symlinks.
> 
> True.  He might also be able to use a unionfs.
> -- 
> John Hasler
> 
> 
> -- 
> To UNSUBSCRIBE, email to debian-user-REQUEST@lists.debian.org 
> with a subject of "unsubscribe". Trouble? Contact listmaster@lists.debian.org
> Archive: http://lists.debian.org/87wrvv6xl0.fsf@thumper.dhh.gt.org
> 

I worked on a personal project last year in which I ran into the 32k limit
and solved the problem by imposing a simple structure on my directory names.

I wanted to study the frequency of occurance of files with exactly the
same content. To do this I set out to compute the md5sum of every
ordinary file on four hosts (all running Debian GNU Linux ext3). I
wanted to have a directory named with the md5sum of a file. One
directory for each ordinary file. In this directory I intended to
store information about occurances of that particular file
contents. All these files were to be under a root directory that I
name filedata/. The first implementation hit a wall at 32998
sub-directories, as most people following this thread now know, but
was a total surprise to me at the time. I solved the problem by
introducing two levels of sub-directories under filedata/. Instead of
having a sub-directory named, for example
ed7e26ec800369ca9f694b54e4ed50c4, I introduced into this string two
slashes and created the needed directory structure with

mkdir -p filedata/ed7/e26/ec800369ca9f694b54e4ed50c4

This resulted, rather quickly as data was collected, in a structure in
which there were 4096 sub-directories directly under filedata/ and
after more data collection 9 +/-3 sub-directories under each of these
first tier sub-directories.

In following this thread, I was struck by the difficulty that was
caused by poorly devised technical jargon. "Folder" has no history of
use in the UNIX/POSIX environment, and with good reason. A directory
does not -contain- files in the sense that a manilla folder contains a
paper document. It contains information about a name, as in a
telephone directory. Furthermore, the original design documents of
UNIX place great importance on the fact that a directory -was-
-itself- a file, all be it one that was marked for special handling by
the OS.  Making a tree structure out of files, only, without some
alternative structure to handle the tree was a point of some pride for
them. They also took some pride in the reasonableness of the names
they assigned to the objects they invented.

For users, it is unfortunate that the word folder is used for this
function, as very few users are unfamiliar with the idea of a
telephone directory. At least few are so clueless that they think
their girl-friend or boy-friend is actually pressed within the pages
of that tome. Folder worked for a while in the early days of the Apple
computer where the first file system on floppy disks had only
top-level directories (called folders) and no nested directories.  I
think because Apple didn't want to trouble their users with difficult
concepts, like telephones and dialing a telephone number. Who remembers
dialing? Where did that word come from? ;-)

-- 
Paul E Condon           
pecondon@mesanetworks.net


-- 
To UNSUBSCRIBE, email to debian-user-REQUEST@lists.debian.org 
with a subject of "unsubscribe". Trouble? Contact listmaster@lists.debian.org
Archive: http://lists.debian.org/20100426034739.GB3490@big.lan.gnu


