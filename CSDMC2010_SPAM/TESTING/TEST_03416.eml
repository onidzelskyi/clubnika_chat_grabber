X-Account-Key: account5
X-UIDL: GmailId1285492b6793a656
X-Mozilla-Status: 0000
X-Mozilla-Status2: 00000000
X-Mozilla-Keys:                                                                                 
Delivered-To: mlsubscriber.tech@csmining.org
Received: by 10.143.34.8 with SMTP id m8cs151743wfj;
        Sat, 1 May 2010 08:53:42 -0700 (PDT)
Received: by 10.86.119.19 with SMTP id r19mr6504890fgc.76.1272729221003;
        Sat, 01 May 2010 08:53:41 -0700 (PDT)
Return-Path: <bounce-debian-user=mlsubscriber.tech=csmining.org@lists.debian.org>
Received: from liszt.debian.org (liszt.debian.org [82.195.75.100])
        by mx.google.com with ESMTP id b17si5206491fka.13.2010.05.01.08.53.40;
        Sat, 01 May 2010 08:53:40 -0700 (PDT)
Received-SPF: pass (google.com: manual fallback record for domain of bounce-debian-user=mlsubscriber.tech=csmining.org@lists.debian.org designates 82.195.75.100 as permitted sender) client-ip=82.195.75.100;
Authentication-Results: mx.google.com; spf=pass (google.com: manual fallback record for domain of bounce-debian-user=mlsubscriber.tech=csmining.org@lists.debian.org designates 82.195.75.100 as permitted sender) smtp.mail=bounce-debian-user=mlsubscriber.tech=csmining.org@lists.debian.org; dkim=neutral (body hash did not verify) header.i=@messagingengine.com
Received: from localhost (localhost [127.0.0.1])
	by liszt.debian.org (Postfix) with QMQP
	id CBA6913A498D; Sat,  1 May 2010 15:53:35 +0000 (UTC)
Old-Return-Path: <hmh@debian.org>
XChecker-Version: SpamAssassin 3.2.5 (2008-06-10) on liszt.debian.org
XLevel: 
XStatus: No, score=-12.0 required=4.0 tests=LDOSUBSCRIBER,LDO_WHITELIST,
	RCVD_IN_DNSWL_LOW autolearn=failed version=3.2.5
X-Original-To: lists-debian-user@liszt.debian.org
Delivered-To: lists-debian-user@liszt.debian.org
Received: from localhost (localhost [127.0.0.1])
	by liszt.debian.org (Postfix) with ESMTP id 1E93713A4830
	for <lists-debian-user@liszt.debian.org>; Sat,  1 May 2010 15:53:30 +0000 (UTC)
X-Virus-Scanned: at lists.debian.org with policy bank en-ht
X-AmavisStatus: No, score=-8 tagged_above=-10000 required=5.3
	tests=[BAYES_00=-2, LDO_WHITELIST=-5, RCVD_IN_DNSWL_LOW=-1]
	autolearn=ham
Received: from liszt.debian.org ([127.0.0.1])
	by localhost (lists.debian.org [127.0.0.1]) (amavisd-new, port 2525)
	with ESMTP id yTbkeMWuVssX for <lists-debian-user@liszt.debian.org>;
	Sat,  1 May 2010 15:53:22 +0000 (UTC)
Received: from out1.smtp.messagingengine.com (out1.smtp.messagingengine.com [66.111.4.25])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(Client did not present a certificate)
	by liszt.debian.org (Postfix) with ESMTPS id 4D6E213A4827;
	Sat,  1 May 2010 15:53:22 +0000 (UTC)
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by gateway1.messagingengine.com (Postfix) with ESMTP id 653C1EC2C6;
	Sat,  1 May 2010 11:53:18 -0400 (EDT)
Received: from heartbeat2.messagingengine.com ([10.202.2.161])
  by compute1.internal (MEProxy); Sat, 01 May 2010 11:53:18 -0400
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed/relaxed; d=messagingengine.com; h=date:from:to:cc:subject:message-id:references:mime-version:content-type:in-reply-to; s=smtpout; bh=ZEi5nmPS6l7uxD/kUDiRQmM97sg=; b=lv0Iq/qS5BLp1D4n8+nJO5eHoeI0lCJYHGyOfccP3x8Jg46Q4BnLXNMw745EmnGoX/DxIy6T911XZxyO9MZY3zVcSVPCMOE2qLDeMNn/Zj7tQeVSro1fqu3y1TdgvOxomyh39t+MUF4uGz87ZuLdPsNhJD5n3GLaSRohzzbA0cI=
X-Sasl-enc: Bn8Kip72+kNDXFlV5/9LjfvIPnHddG2Hy4X62IWiaGrS 1272729198
Received: from khazad-dum.debian.net (unknown [201.82.172.173])
	by mail.messagingengine.com (Postfix) with ESMTPSA id 0B01F1BEE;
	Sat,  1 May 2010 11:53:18 -0400 (EDT)
Received: from localhost (localhost [127.0.0.1])
	by localhost.khazad-dum.debian.net (Postfix) with ESMTP id 75CF7E00E9;
	Sat,  1 May 2010 12:53:16 -0300 (BRT)
X-Virus-Scanned: Debian amavisd-new at khazad-dum.debian.net
Received: from khazad-dum.debian.net ([127.0.0.1])
	by localhost (khazad-dum2.khazad-dum.debian.net [127.0.0.1]) (amavisd-new, port 10024)
	with LMTP id XQMYlWgEVsup; Sat,  1 May 2010 12:53:15 -0300 (BRT)
Received: by khazad-dum.debian.net (Postfix, from userid 1000)
	id A5B8DE00F6; Sat,  1 May 2010 12:53:15 -0300 (BRT)
Date: Sat, 1 May 2010 12:53:15 -0300
From: Henrique de Moraes Holschuh <hmh@debian.org>
To: Carlos Bergero <rak@fcien.edu.uy>
Cc: debian-user@lists.debian.org, debian-isp@lists.debian.org
Subject: Re: Cyrus 2.2 imapd in AMD64
Message-ID: <20100501155315.GA24313@khazad-dum.debian.net>
References: <4BD0E0D1.1080109@fcien.edu.uy>
 <4BD5E41E.80702@fcien.edu.uy>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <4BD5E41E.80702@fcien.edu.uy>
X-GPG-Fingerprint: 1024D/1CDB0FE3 5422 5C61 F6B7 06FB 7E04  3738 EE25 DE3F
 1CDB 0FE3
User-Agent: Mutt/1.5.20 (2009-06-14)
X-Rc-Virus: 2007-09-13_01
X-Rc-Spam: 2008-11-04_01
Resent-Message-ID: <6EAGBuZBygF.A.GZD._5E3LB@liszt>
Resent-From: debian-user@lists.debian.org
X-Mailing-List: <debian-user@lists.debian.org> archive/latest/575628
X-Loop: debian-user@lists.debian.org
List-Id: <debian-user.lists.debian.org>
List-Post: <mailto:debian-user@lists.debian.org>
List-Help: <mailto:debian-user-request@lists.debian.org?subject=help>
List-Subscribe: <mailto:debian-user-request@lists.debian.org?subject=subscribe>
List-Unsubscribe: <mailto:debian-user-request@lists.debian.org?subject=unsubscribe>
Precedence: list
Resent-Sender: debian-user-request@lists.debian.org
Resent-Date: Sat,  1 May 2010 15:53:35 +0000 (UTC)

On Mon, 26 Apr 2010, Carlos Bergero wrote:
> ./tls_sessions.db: Berkeley DB (Btree, version 8, native byte-order)
> ./deliver.db: Berkeley DB (Btree, version 8, native byte-order)
> and there a a couple of cyrus DB files which readme upgrade ask to
> migrate with a cyrus tool which is not working atm,
> ./mailboxes.db: Cyrus skiplist DB  (which it has a different name
> simply mailboxes, without the .db extension)
> ./annotations.db: Cyrus skiplist DB  (which is not mentioned in the
> tutorial)
> So far im focused in trying to get this DB to the proper format
> version 9 in the standard Lenny install, and see what happens,
> without much success.

db*_upgrade will upgrade (NOT DOWNGRADE) a berkeley database. Run it from
the main environment directory.  It is in the db*-util packages.  Use the
correct target version (for cyrus, see the package dependency list to know
which libdb it uses).

Just delete tls_sessions.db.  It is the TLS session cache.

You can consider deleting deliver.db.  It is the cache used for duplicate
suppression and to avoid sending vacation messages to the same recipient
twice.  There will be very little harm done (if any) should you delete it.

Consider reading the documentation for berkeley DB, especially the stuff
prepared by OpenLDAP and samba (look in their web pages).  Screw that up,
and your performance goes downhill.

Consider reading the archives of the cyrus users ML, hunt down from any
posts from @fastmail.fm and read them.  They _REALLY_ know their stuff.

All skiplist DBs are auto-upgraded by cyrus on access.  If one wasn't,
chances are it is corrupt and you have a big problem.

After you manage to start cyrus, run cyrquota and cyrreconstruct over *ALL*
mailboxes.  I mean *ALL* of them.  And this _will_ take time.  You could do
it with the system in use, but since it is a safety measure to insure there
is no inconsistent data, well, it is best done before any read or write
access is done to the mailboxes.

And do remember cyrus has databases stored in the user dirs as well. Debian
packages should have them skiplist or plaintext, which don't require manual
intervention, but check it (seen database).

Sieve requires conversion of _all_ scripts on all spools.  Look for the
massievec script and run it on every sieve script.

This is _all_ in the cyrus documentation, although probably not organized
like that...

-- 
  "One disk to rule them all, One disk to find them. One disk to bring
  them all and in the darkness grind them. In the Land of Redmond
  where the shadows lie." -- The Silicon Valley Tarot
  Henrique Holschuh


-- 
To UNSUBSCRIBE, email to debian-user-REQUEST@lists.debian.org 
with a subject of "unsubscribe". Trouble? Contact listmaster@lists.debian.org
Archive: http://lists.debian.org/20100501155315.GA24313@khazad-dum.debian.net


